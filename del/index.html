<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Data Deletion Request - Gagan Jewellers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Request deletion of your data from Gagan Jewellers by Humble Solutions.">
  <style>
    :root{
      --bg:#0f1420;--card:#141a28;--muted:#9fb0c6;--text:#e9f0f7;--accent:#ffd166;--border:#22304a;--ok:#A0E8AF;--warn:#FF7A7A;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    a{color:#7cc2ff;text-decoration:none}a:hover{text-decoration:underline}
    .container{max-width:860px;margin:0 auto;padding:28px 16px 64px}
    header{border:1px solid var(--border);border-radius:14px;padding:20px;background:linear-gradient(180deg,rgba(255,209,102,.08),rgba(255,209,102,0));margin:12px 0 22px}
    .title{font-weight:800;font-size:26px}
    .sub{color:var(--muted);font-size:14px;margin-top:6px}
    .card{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:18px;margin-top:16px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    label{display:block;font-weight:600;margin-bottom:6px}
    .req{color:var(--accent);margin-left:4px}
    input,textarea,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0e1726;color:var(--text)}
    textarea{min-height:110px;resize:vertical}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .row{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:700px){.row{grid-template-columns:1fr 1fr}}
    .warn{background:rgba(255,122,122,.06);border:1px solid rgba(255,122,122,.35);border-radius:10px;padding:10px 12px;margin-top:8px;color:#ffd6d6}
    .ok{background:rgba(160,232,175,.08);border:1px solid rgba(160,232,175,.35);border-radius:10px;padding:10px 12px;margin-top:8px;color:#d7ffe0}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{appearance:none;border:1px solid var(--border);background:#1b2436;color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    button.primary{background:var(--accent);color:#1b1400;border-color:#d9b04f}
    button:disabled{opacity:.6;cursor:not-allowed}
    .small{font-size:12px;color:var(--muted)}
    .footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}
    .required-note{font-size:12px;color:var(--muted);margin-top:4px}
    .badge{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:2px 8px;font-size:12px;margin-right:8px;background:#111827;color:#c9d5e6}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">Data Deletion Request</div>
      <div class="sub">For Gagan Jewellers — operated by Humble Solutions</div>
      <div class="sub" style="margin-top:8px">
        <span class="badge">Last Updated: <span id="lastUpdated">2025-10-28</span></span>
        <span class="badge">Support: <a href="mailto:executives@humblesolutions.in">executives@humblesolutions.in</a></span>
      </div>
    </header>

    <div class="card">
      <p>This page lets you request deletion of your account and associated personal data. After submission, we’ll verify your identity and process the request within a reasonable timeframe.</p>
      <p class="warn"><strong>Important:</strong> For your safety, do not share your sensitive passwords. We verify ownership via email. A “Password (optional)” field is provided only if your process explicitly requires it. Leaving it blank is recommended.</p>
      <div class="required-note">Fields marked with <span class="req">*</span> are required.</div>
    </div>

    <form id="deleteForm" class="card" novalidate>
      <div class="grid">
        <div>
          <label for="email">Email used in the app <span class="req">*</span></label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required>
          <div class="hint">We’ll send a confirmation to this address.</div>
        </div>
        <div>
          <label for="name">Full Name <span class="req">*</span></label>
          <input id="name" name="name" type="text" placeholder="Your full name" required>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="identifier">Account Identifier</label>
          <input id="identifier" name="identifier" type="text" placeholder="Phone number or User ID (if available)">
          <div class="hint">This helps us find the right account.</div>
        </div>
        <div>
          <label for="reason">Request Type <span class="req">*</span></label>
          <select id="reason" name="reason" required>
            <option value="">Select one…</option>
            <option value="delete_account">Delete my account and data</option>
            <option value="delete_specific">Delete specific data only</option>
            <option value="revoke_consent">Revoke consent</option>
            <option value="other">Other</option>
          </select>
        </div>
      </div>

      <div>
        <label for="details">Details (what to delete) <span class="req">*</span></label>
        <textarea id="details" name="details" placeholder="Tell us what to remove (e.g., account, orders, saved addresses)…" required></textarea>
      </div>

      <div>
        <label for="password">Password (optional)</label>
        <input id="password" name="password" type="password" placeholder="Leave blank for safer email verification">
        <div class="hint">We recommend leaving this blank. If you provide it, it will be transmitted as part of your request.</div>
      </div>

      <div>
        <label for="appid">App Version / Device (optional)</label>
        <input id="appid" name="appVersion" type="text" placeholder="e.g., v1.2.3 on Android 14">
      </div>

      <div>
        <label><input id="confirm" type="checkbox" required> I confirm that I own this account and understand deletion may be irreversible. <span class="req">*</span></label>
      </div>

      <div class="actions">
        <button type="submit" class="primary" id="submitBtn">Submit Request</button>
        <button type="button" id="emailBtn">Send via Email App</button>
      </div>

      <div id="status" class="ok" style="display:none;margin-top:12px;"></div>
      <div id="error" class="warn" style="display:none;margin-top:12px;"></div>

      <div class="small" style="margin-top:10px">We’ll verify your request via email at executives@humblesolutions.in and may ask for additional information to protect your account.</div>
    </form>

    <div class="card">
      <h3 style="margin-top:0">What happens next?</h3>
      <ol>
        <li>You’ll receive an acknowledgment email.</li>
        <li>We verify ownership of the email/account.</li>
        <li>Upon verification, we delete the requested data and notify you when complete.</li>
      </ol>
      <div class="small">If you submitted by “Email App”, ensure the composed email is sent.</div>
    </div>

    <div class="footer">© <span id="year"></span> Humble Solutions</div>
  </div>

  <script>
    // Configuration: leave ENDPOINT empty to use email fallback only.
    // If you later deploy a backend, set ENDPOINT to your HTTPS URL and it will POST JSON there.
    const CONFIG = {
      SUPPORT_EMAIL: 'executives@humblesolutions.in',
      ENDPOINT: '' // e.g., 'https://api.humblesolutions.in/deletion-requests'
    };

    function byId(id){ return document.getElementById(id); }
    function show(el, msg){ el.textContent = msg; el.style.display = 'block'; }
    function hide(el){ el.style.display = 'none'; el.textContent = ''; }

    // Prefill dates
    (function(){
      const d=new Date();
      byId('year').textContent = d.getFullYear();
      byId('lastUpdated').textContent = '2025-10-28';
    })();

    // Build email body text safely
    function buildEmailBody(values){
      const lines = [
        'Data Deletion Request - Gagan Jewellers',
        '',
        'Name: ' + values.name,
        'Email: ' + values.email,
        'Account Identifier: ' + (values.identifier || '-'),
        'Request Type: ' + values.reason,
        'Details:',
        values.details,
        '',
        'App/Device: ' + (values.appVersion || '-'),
        'Password (optional, may be blank): ' + (values.password ? '[PROVIDED BY USER]' : '[NOT PROVIDED]'),
        '',
        'I confirm that I own this account and understand deletion may be irreversible.'
      ];
      return encodeURIComponent(lines.join('\n'));
    }

    function getFormValues(){
      return {
        email: byId('email').value.trim(),
        name: byId('name').value.trim(),
        identifier: byId('identifier').value.trim(),
        reason: byId('reason').value,
        details: byId('details').value.trim(),
        password: byId('password').value, // optional
        appVersion: byId('appid').value.trim(),
        confirm: byId('confirm').checked
      };
    }

    function validate(values){
      const errors=[];
      if(!values.email) errors.push('Email is required.');
      if(values.email && !/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(values.email)) errors.push('Enter a valid email.');
      if(!values.name) errors.push('Full Name is required.');
      if(!values.reason) errors.push('Select a Request Type.');
      if(!values.details) errors.push('Please provide details of what to delete.');
      if(!values.confirm) errors.push('Please confirm ownership and irreversibility.');
      return errors;
    }

    byId('emailBtn').addEventListener('click', function(){
      hide(byId('status')); hide(byId('error'));
      const v = getFormValues();
      const errs = validate(v);
      if(errs.length){ show(byId('error'), errs.join(' ')); return; }
      const subject = encodeURIComponent('Data Deletion Request - Gagan Jewellers');
      const body = buildEmailBody(v);
      const mailto = 'mailto:' + CONFIG.SUPPORT_EMAIL + '?subject=' + subject + '&body=' + body;
      window.location.href = mailto;
    });

    byId('deleteForm').addEventListener('submit', async function(e){
      e.preventDefault();
      hide(byId('status')); hide(byId('error'));
      const v = getFormValues();
      const errs = validate(v);
      if(errs.length){ show(byId('error'), errs.join(' ')); return; }

      // If no backend endpoint configured, guide user to use Email App instead
      if(!CONFIG.ENDPOINT){
        show(byId('error'), 'Online submission is not configured. Click "Send via Email App" to submit your request by email.');
        return;
      }

      // Submit JSON to your backend
      byId('submitBtn').disabled = true;
      try{
        const res = await fetch(CONFIG.ENDPOINT, {
          method: 'POST',
          headers: { 'Content-Type':'application/json' },
          body: JSON.stringify({
            app: 'Gagan Jewellers',
            company: 'Humble Solutions',
            submittedAt: new Date().toISOString(),
            ...v
          })
        });
        if(!res.ok) throw new Error('Request failed: ' + res.status);
        show(byId('status'), 'Your request has been submitted. Please check your email for verification steps.');
        (e.target).reset();
      }catch(err){
        show(byId('error'), 'Could not submit online: ' + err.message + '. You can still use "Send via Email App".');
      }finally{
        byId('submitBtn').disabled = false;
      }
    });
  </script>
</body>
</html>
